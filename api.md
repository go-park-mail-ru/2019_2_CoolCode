## 0. Cущности
### 0.1 Пользователь
```json
{
     "id":"int",
     "email":"string",
     "password":"string",
     "username":"string",
     "name":"string",
     "status":"string"
}
```
    
  | Ключ          | Значение                                                                                                                                                                                                                                                                               |
    | ------------- | ----------------------------------------- |
    | `username`    | Логин  пользователя. |
    | `password`    | Пароль пользователя |
    | `id`     | Id пользователя |
    | `email`     | Email пользователя |
    | `name`     | Реальное имя пользователя |
    | `status`     | Статус пользователя |  


## 1. Общие положения 

Все запросы посылаются на сервер <тут адрес>. Если запрос не содержит в себе тело, то он `GET`, иначе `POST`

### 1.1 Типы http кодов, возвращаемых сервером в ответе

| Код       | Описание |                                                                                                                                                            
| -------------- | -------------------------------------------------------------------------------|
| `200`      | Успех. |
| `400`    | Неверные данные в запросе (неправильный логин/пароль, несуществующий ID заданий, пользователей). Тело ответа дополнительно содержит мнемокод с описанием ошибки, завернутый в JSON.|
| `401`      | Клиент не авторизован. |
| `405`      | Неверный метод (например, `POST` вместо `GET` для `/get_school_list`). `GET` используется в тех запросах, где не надо посылать json в теле |
| `500`      | Фатальная ошибка на сервере. |

## 2. Пользователь 

### 2.1 Регистрация

Ниже указан запрос клиента на авторизацию.

Запрос `/users` типа POST

```json
{
    "email": "string",
    "password": "string"
}
```

| Ключ          | Значение                                                                                                                                                                                                                                                                               |
| ------------- | ----------------------------------------- |
| `email`       | Email нового пользователя. |
| `password`     | Пароль нового пользователя |

Запрос так же может содержать любые другие поля пользователя

Ответ на запрос: код ошибки


### 2.2 Авторизация

Ниже указан запрос клиента на авторизацию.

Запрос `login`

```json
{
    "email": "string",
    "password": "string"
}
```

| Ключ          | Значение                                                                                                                                                                                                                                                                               |
| ------------- | ----------------------------------------- |
| `email`       | Email  пользователя. |
| `password`     | Пароль пользователя |

Ответ на запрос:

Заголовок ответа содержит ключ `Set-Cookie`. Значение - ключ  - session_id.

```json
 {
      "id":"int",
      "email":"string",
      "username":"string",
      "name":"string",
      "status":"string"
 }
```
    
  | Ключ          | Значение                                                                                                                                                                                                                                                                               |
    | ------------- | ----------------------------------------- |
    | `username`    | Логин  пользователя. |
    | `id`     | Id пользователя |
    | `email`     | Email пользователя |
    | `name`     | Реальное имя пользователя |
    | `status`     | Статус пользователя |  
### 2.3 Выход

Выход есть отвязка соединения от устройства и аккаунта.

Запрос `/logout`

Ответ на запрос:

Код http `200` в случае успеха, а код, описывающий ошибку, в ином случае.

После после получения ответа этого типа неуместны никакие другие запросы, кроме `/login`,`/sign_up`.

### 2.4 Редатирование профиля
Редактирование полей профиля
    
Запрос `/users/id` типа PUT 
    
Тело запроса должно содержать ВСЕГО пользователя, а не только редактируемые поля
    
```json
 {
      "id":"int",
      "email":"string",
      "username":"string",
      "name":"string",
      "status":"string"
 }
```
    
  | Ключ          | Значение                                                                                                                                                                                                                                                                               |
    | ------------- | ----------------------------------------- |
    | `username`    | Логин  пользователя. |
    | `id`     | Id пользователя |
    | `email`     | Email пользователя |
    | `name`     | Реальное имя пользователя |
    | `status`     | Статус пользователя |  
    
    
### 2.5 Получение аватарки
Запрос /photos/{id} типа GET

Ответ: multipart/form-data

    
### 2.6 Загрузка аватарки
Запрос /photos типа POST

Тип данных multipart/form-data

Ответ: код ошибки

# 3 Чаты

###3.1 Комнаты и чаты пользователя
GET /users/{id}/chats

Ответ на запрос:
```json
 {
    "body": {
      "rooms": [
        {
          "room_id": "int",
           "room_name": "string"
        }   
      ],
      "chats":[
        {   
          "chat_id": "int",
          "Name": "string",
          "NewMsgCount": "int"
             
        }
      ]   
    }
 }
```

###3.2 Информация о комнате
GET /rooms/{id}

Ответ на запрос:
```json
 {
    "body": {
      "channels":[
        {   
          "chat_id": "int",
          "Name": "string",
          "NewMsgCount": "int"
        }
      ]   
    }
 }
```

###3.3 Создать комнату
POST /rooms/

Запрос:
```json
 {
    "name": "string"
 }
```
Ответ за запрос:
```json
 {
    "id": "int"
 }
```

###3.4 Создать канал внутри комнаты
POST /rooms/{id}

Запрос:
```json
 {
    "name": "string"
 }
```
Ответ за запрос:
```json
 {
    "id": "int"
 }
```



###3.5 Создать чат
POST /chats

Запрос:
```json
 {
    "user_id": "int"
 }
```

```json
 {
    "id": "int"
 }
```



    
    
